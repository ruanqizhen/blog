---
title: "双信封悖论"
tags: 
  - "浮生若梦"
---

周末的午后，儿子突然捧着他的数学书，跑来让我解释一道题。这场景让我有些意外，要知道，他平时对数学可是能躲多远躲多远，遇到不明白的地方，通常都是直接翻页跳过。我虽气得要死，但转念一想，自己小时候也是这样，也就没法跟他计较了。难得他主动来请教，我接过书，扫了一眼题目，顿时来了兴趣，是经典的“双信封悖论”。

因为这道题与抽奖有关，让我回想起了我之前的一次抽奖经历。我这人财运不佳，和“中奖”两个字天生犯冲，参加过的抽奖活动，不是“谢谢惠顾”就是“再接再厉”。当然，这未必算坏事，至少让我认清现实，远离了赌博、彩票之类的东西，也算省下不少钱。

## 有奖答题

我之前上班的公司，每年岁末年初都会举办年会，其中最让人期待的环节莫过于抽奖。奖品从iPhone手机到豪华旅行，无一不让人心动。我虽然明知自己手气不佳，但还是抱着一丝侥幸心理参与其中，反正没有成本。

那年的年会，抽奖环节依旧扣人心弦。随着一个个小奖项被抽出，我的心也渐渐沉了下去，看来今年又要“颗粒无收”了。就在我准备收拾东西回家的时候，主持人的声音突然响起：“接下来，我们要抽出一位幸运观众，获得我们今年的最高大奖！”

我立刻屏住呼吸，紧盯着台上。主持人摸出一张纸条，打开一看，竟然念出了我的名字！我简直不敢相信自己的耳朵，幸福来得如此突然，我仿佛看到了自家祖坟上袅袅升起的青烟。我激动地蹦上舞台，准备领取人生中的第一个大奖。

然而，主持人接下来的话却像一盆冷水，瞬间浇灭了我心中的火焰。“这位幸运观众，恭喜你中奖！但是，在领取奖品之前，你需要先回答一个问题。答对了，奖品就是你的；答错了，奖品则会顺延给下一位幸运观众。”

我就知道事情没那么简单！“天上掉馅饼”的好事怎么可能轮到我？不过，箭在弦上，不得不发，我只能硬着头皮听下去。具体问题我早已忘了，大致是：“公司发展历程中，公司领导曾提出过一项重要战略，对公司发展影响深远。问该战略提出的具体时间？”然后给出了 A、B、C、D 四个选项。

领导讲话我向来都是当面鼓掌，然后左耳进右耳出，至于具体内容和时间，我哪里记得？无奈之下，我只能凭着“小镇做题家”的直觉，随便选了个C。

主持人面带微笑地看着我，问道：“你确定吗？你还有一次修改答案的机会，要不要改？”

我心里琢磨着，四个选项的正确概率都是1/4，改了也不会提高胜算。而且，万一改了之后反而错了，岂不是更亏？于是，我坚定地说：“不改了，就选C。”

就这样，我与人生中唯一一次可能中大奖的机会失之交臂。事后复盘，我才意识到，自己输就输在“坚持不改”上。后来我想明白了，回答问题是公司要求的，而主持人的任务是活跃气氛，他希望尽快让人中奖，自己也好早点下班回家。并且，他是知道正确答案的。所以，他的话术通常是：如果幸运观众蒙对了，他就直接宣布“答对了！”；如果蒙错了，他就会暗示：“再给你一次机会，要不要换一个？”直到观众选对为止。只是他可能没料到，会遇到像我这样死心眼、不愿改答案的选手。

这个问题的本质在于：当我们完全不知道答案的选择时，每个选项为正确答案概率是均等的。但是，一旦有一个知晓答案的人介入，概率分布就会发生变化，不再是均匀的了。此时，应该根据新的概率分布重新做出最优选择，而不是固守最初的随机选择。

## 三门问题

与我遇到的情况类似，一个更具迷惑性的问题是经典的“三门问题”（Monty Hall Problem）：舞台上有三扇门（比如 A、B、C），其中只有一扇门后藏着奖品。如果你选对了，就能获得奖品。

游戏开始时，你只能随机选择一扇门，比如你选了 A。接着，主持人（他知道正确答案）会打开一扇没有奖品的门，比如 B。然后，他会问你：“你确定要坚持选 A，还是换成 C？”

直觉上，这似乎还是在两扇门（A 和 C）之间二选一，换与不换好像没区别。但事实上，如果你改选 C，中奖概率会提高一倍！也就是说，正确的策略是：一定要换。

这个问题的本质原因仍然在于：主持人是知道正确答案的，而他的行为改变了概率分布。A 门是你选的，你不知道答案； C 门是主持人选的，但他知道答案。所以这两个门后面有奖品的概率肯定不同。计算过程如下：

你最初选择 A 时，选中的概率是 1/3，而 C 和 B 共同的概率是 2/3。 当主持人刻意排除一个错误选项（比如 B），这意味着之前 B 和 C 共有的 2/3 概率全部给了剩下的 C 门。而 A 作为你最初的随机选择，概率始终是 1/3，没有变化。

因此，换选 C 的中奖概率是 2/3，而坚持 A 只会让中奖概率维持在 1/3，所以换才是最优策略。

## 双信封悖论

回到“双信封悖论”，这个问题更具迷惑性。想象一下，你参加了一个抽奖活动。主持人拿出两个红包，外表看起来完全一样，但里面装着不同金额的现金。主持人告诉你，其中一个红包里的钱是另一个的两倍，但具体金额是多少，他不会透露。

你随机选了一个红包，打开一看，发现里面是 2000 元。但另一个红包究竟有多少钱，你无从得知。现在，主持人给你一个最后的机会：你可以坚持拿当前的红包，也可以换成另一个红包。那么，你该如何决策？

根据前面的经验，我们知道这时候不要瞎猜，要计算一下概率，算算另一个信封中奖金的期望值：

当前信封的金额已知，为 2000 元。而另一个信封中的金额可能是 1000 元（如果当前信封是金额较大的那个）或者 4000 元（如果当前信封是金额较小的那个）。

由于最初选择信封是随机的，我们选中较大金额或较小金额的概率各为 0.5。因此，另一个信封中的奖金期望值为：

$0.5 \times 1000 + 0.5 \times 4000 = 500 + 2000 = 2500$

由于 2500 > 2000，按照期望值计算，我们应该换信封。

为什么说这是一个悖论呢？

假设在平行宇宙中，有两个人“甲”和“乙”同时参加这场游戏。他们面对的是同样的两个信封，但甲选择了 A 信封，乙选择了 B 信封。

当主持人让他们做最终决定时，甲和乙都按照上面的计算方式得出同样的结论：换信封更有利。于是，甲换到 B，乙换到 A。换句话说，他们实际上只是交换了彼此的信封。

然而，从上帝视角来看，他们的总奖金总量并没有发生任何变化，奖金不会因为“换信封”这件事就凭空增加。可按照期望计算，他们似乎都提高了自己的奖金，这显然是不可能的。那么，究竟哪里出错了呢？

问题的根源在于，我们在计算另一个信封的期望值时，隐含了一个错误的前提假设：奖金可能的金额是在正整数范围内均匀分布的。然而，实际的抽奖奖金不可能符合这样的均匀分布。

程序员对此可能感受更深。如果要让计算机生成一个符合均匀概率分布的随机数，我们必须指定一个有限范围，比如 0 到 1 之间，或者计算机能够表示的整数范围。但如果我们真的试图在整个正整数范围内生成一个均匀分布的随机数，那么任何特定数值被选中的概率都会是零，而最终选出的数值则必然是一个无穷大。

换句话说，如果信封中的金额真的遵循“正整数上的均匀分布”，那么我们打开信封后，看到的金额应该是一个无穷大的数值。在这种情况下，我们确实可以按照前面的计算方法得出另一个信封的期望值也是无穷大，所以换不换都没有区别。

但现实情况是，我们打开信封后，看到的金额总是一个有限的数值，比如 10、20、2000 等。这说明，主持人给出的金额并不是从一个无限的均匀分布中随机选取的，而是遵循某种其它的概率分布。

如果没有任何背景限定，通常情况下，这种金额的概率分布更符合指数分布，也就是说，金额越小，出现的概率越高；金额越大，出现的概率越低。如果我们在这种分布的前提下重新计算期望值，会发现：另一个信封的期望金额恰好等于当前信封的金额。换句话说，换不换信封，期望奖金都是一样的，并不存在“换了就赚”的优势。

当然，在现实中，通常还会有一个限定范围，比如在公司的抽奖活动中，奖金数额往往更符合泊松分布，即某一范围内的金额出现的概率较高，而超出该范围的概率较低。这时候，换不换信封就需要具体分析了。例如，如果老板一向抠门，奖金通常不会太高，那么当你打开信封看到 2000 元时，就应该“见好就收”，不要指望另一个信封有更高金额；但如果老板非常大方，平时奖金基本都在 4000 元以上，那么如果你打开信封发现只有 2000，那当然要果断换，另一个信封大概率是 4000！
